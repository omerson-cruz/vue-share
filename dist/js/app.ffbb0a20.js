(function(t){function e(e){for(var r,o,i=e[0],c=e[1],l=e[2],d=0,m=[];d<i.length;d++)o=i[d],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&m.push(a[o][0]),a[o]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(t[r]=c[r]);u&&u(e);while(m.length)m.shift()();return n.push.apply(n,l||[]),s()}function s(){for(var t,e=0;e<n.length;e++){for(var s=n[e],r=!0,i=1;i<s.length;i++){var c=s[i];0!==a[c]&&(r=!1)}r&&(n.splice(e--,1),t=o(o.s=s[0]))}return t}var r={},a={app:0},n=[];function o(e){if(r[e])return r[e].exports;var s=r[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,o),s.l=!0,s.exports}o.m=t,o.c=r,o.d=function(t,e,s){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(o.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)o.d(s,r,function(e){return t[e]}.bind(null,r));return s},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=e,i=i.slice();for(var l=0;l<i.length;l++)e(i[l]);var u=c;n.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("56d7")},"441d":function(t,e,s){"use strict";var r=s("8b94"),a=s.n(r);a.a},4678:function(t,e,s){var r={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn-bd":"9686","./bn-bd.js":"9686","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-in":"ec2e","./en-in.js":"ec2e","./en-nz":"6f50","./en-nz.js":"6f50","./en-sg":"b7e9","./en-sg.js":"b7e9","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-mx":"b5b7","./es-mx.js":"b5b7","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fil":"d69a","./fil.js":"d69a","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-deva":"aaf2","./gom-deva.js":"aaf2","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./oc-lnc":"167b","./oc-lnc.js":"167b","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tk":"5aff","./tk.js":"5aff","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-mo":"3a6c","./zh-mo.js":"3a6c","./zh-tw":"90ea","./zh-tw.js":"90ea"};function a(t){var e=n(t);return s(e)}function n(t){if(!s.o(r,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return r[t]}a.keys=function(){return Object.keys(r)},a.resolve=n,t.exports=a,a.id="4678"},4889:function(t,e,s){"use strict";var r=s("5f52"),a=s.n(r);a.a},"56d7":function(t,e,s){"use strict";s.r(e),s.d(e,"defaultClient",(function(){return rs}));s("99af"),s("b0c0");var r=s("b85c"),a=s("5530"),n=(s("e260"),s("e6cf"),s("cca6"),s("a79d"),s("2b0e")),o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"app"}},[s("v-app",{staticStyle:{background:"#E3E3E3"}},[s("v-card",{attrs:{color:"grey lighten-4",elevation:"0"}},[s("v-navigation-drawer",{attrs:{app:"",temporary:"",fixed:""},model:{value:t.sideNav,callback:function(e){t.sideNav=e},expression:"sideNav"}},[s("v-toolbar",{attrs:{color:"red accent-1",dark:"",elevation:"0"}},[s("v-app-bar-nav-icon",{on:{click:t.toggleSideNav}}),s("router-link",{staticStyle:{cursor:"pointer"},attrs:{to:"/",tag:"span"}},[s("h1",{staticClass:"title pl-3"},[t._v(" VueShare ")])])],1),s("v-divider"),s("v-list",[s("v-list-item-group",[t._l(t.sideNavItems,(function(e,r){return s("v-list-item",{key:r,attrs:{ripple:"",to:e.link}},[s("v-list-item-icon",[s("v-icon",[t._v(t._s(e.icon))])],1),s("v-list-item-content",[s("v-list-item-title",{domProps:{textContent:t._s(e.title)}})],1)],1)})),t.user?s("v-list-item",{attrs:{ripple:""},on:{click:t.handleSignOutUser}},[s("v-list-item-icon",[s("v-icon",[t._v("mdi-exit-run")])],1),s("v-list-item-content",[s("v-list-item-title",[t._v("Signout")])],1)],1):t._e()],2)],1)],1),s("v-toolbar",{staticStyle:{"z-index":"100"},attrs:{color:"primary",dark:""}},[s("v-app-bar-nav-icon",{on:{click:t.toggleSideNav}}),s("v-toolbar-title",{staticClass:"hidden-xs-only"},[s("router-link",{staticStyle:{cursor:"pointer"},attrs:{to:"/",tag:"span"}},[t._v(" VueShare ")])],1),s("v-spacer"),s("v-text-field",{attrs:{"prepend-icon":"mdi-magnify","hide-details":"","single-line":"",placeholder:"Search Posts",color:"accent"},on:{input:t.handleSearchPosts},model:{value:t.searchTerm,callback:function(e){t.searchTerm=e},expression:"searchTerm"}}),t.searchResults.length?s("v-card",{attrs:{dark:"",id:"search__card"}},[s("v-list",t._l(t.searchResults,(function(e){return s("v-list-item",{key:e._id,on:{click:function(s){return t.goToSearchResult(e._id)}}},[s("v-list-item-title",[t._v(" "+t._s(e.title)+" - "),s("span",{staticClass:"font-weight-thin"},[t._v(t._s(t.formatDescription(e.description)))])]),t.checkIfUserFavorite(e._id)?s("v-list-item-action",[s("v-icon",{attrs:{large:""}},[t._v("mdi-heart")])],1):t._e()],1)})),1)],1):t._e(),s("v-spacer"),s("v-toolbar-items",[t._l(t.horizontalNavItems,(function(e){return s("v-btn",{key:e.title,attrs:{depressed:"",dark:"",color:"primary",elevation:"0",to:e.link,exact:""}},[s("v-icon",{attrs:{left:""}},[t._v(t._s(e.icon))]),t._v(" "+t._s(e.title)+" ")],1)})),t.user?s("v-btn",{attrs:{depressed:"",elevation:"0",to:"/profile",color:"primary"}},[s("v-icon",{staticClass:"hidden-sm-only",attrs:{left:""}},[t._v(" mdi-account-box-multiple-outline ")]),t.userFavorites.length?s("v-badge",{class:{bounce:t.badgeAnimated},attrs:{right:"",color:"red lighten-2"}},[s("span",{attrs:{slot:"badge"},slot:"badge"},[t._v(t._s(t.userFavorites.length))]),t._v(" Profile ")]):t._e()],1):t._e(),t.user?s("v-btn",{attrs:{depressed:"",elevation:"0",color:"primary"},on:{click:t.handleSignOutUser}},[s("v-icon",{staticClass:"hidden-sm-only",attrs:{left:""}},[t._v(" mdi-exit-run ")]),t._v(" Signout ")],1):t._e()],2)],1)],1),s("main",[s("v-container",{staticClass:"mt-4"},[s("transition",{attrs:{name:"slide",mode:"out-in"}},[s("router-view")],1),s("v-snackbar",{attrs:{timeout:4e3,color:"success",bottom:"",left:""},model:{value:t.authSnackbar,callback:function(e){t.authSnackbar=e},expression:"authSnackbar"}},[s("v-icon",{staticClass:"mr-3"},[t._v(" mdi-shield-check-outline ")]),s("h3",[t._v("You are now signed in")]),s("v-btn",{attrs:{dark:"",elevation:"0"},on:{click:function(e){t.authSnackbar=!1}}},[t._v(" Close ")])],1),t.authError?s("v-snackbar",{attrs:{timeout:4500,color:"warning",bottom:"",left:""},model:{value:t.authErrorSnackbar,callback:function(e){t.authErrorSnackbar=e},expression:"authErrorSnackbar"}},[s("v-icon",{staticClass:"mr-3"},[t._v(" mdi-cancel ")]),s("h3",[t._v(t._s(t.authError.message))]),s("v-btn",{attrs:{dark:"",elevation:"0",to:"/signin"}},[t._v(" Go to Sign In ")])],1):t._e()],1)],1)],1)],1)},i=[],c=(s("fb6a"),s("45fc"),s("2f62")),l={name:"App",created:function(){console.log("app created : user = ",this.$store)},data:function(){return{sideNav:!1,authSnackbar:!1,authErrorSnackbar:!1,badgeAnimated:!1,searchTerm:""}},watch:{authError:function(t){null!==t&&(this.authErrorSnackbar=!0)},user:function(t,e){console.log("new user Value: ",t),console.log("old user Value: ",e),null===e&&(this.authSnackbar=!0)},userFavorites:function(t){var e=this;console.log("badge animate triggered:"),t&&(this.badgeAnimated=!0,setTimeout((function(){e.badgeAnimated=!1}),1e3))}},methods:{handleSignOutUser:function(){this.$store.dispatch("signOutUser")},toggleSideNav:function(){this.sideNav=!this.sideNav},handleSearchPosts:function(){this.$store.dispatch("searchPosts",{searchTerm:this.searchTerm})},goToSearchResult:function(t){this.searchTerm="",this.$router.push("/posts/".concat(t)),this.$store.commit("clearSearchResults")},formatDescription:function(t){return t.length>20?"".concat(t.slice(0,20),"..."):t},checkIfUserFavorite:function(t){console.log("checkIfUserFavorite");var e=this.userFavorites&&this.userFavorites.some((function(e){return e._id===t}));return console.log("isFavorite: ",e),e}},computed:Object(a["a"])(Object(a["a"])({},Object(c["b"])(["user","authError","userFavorites","searchResults"])),{},{horizontalNavItems:function(){var t=[{icon:"mdi-magnify",title:"Posts",link:"/posts"},{icon:"mdi-lock-open-outline",title:"Sign In",link:"/signin"},{icon:"mdi-login-variant",title:"Sign Up",link:"/signup"}];return this.user&&(t=[{icon:"mdi-chat-processing-outline",title:"Posts",link:"/posts"},{icon:"mdi-file-star",title:"Create Post",link:"/post/add"}]),t},sideNavItems:function(){var t=[{icon:"mdi-magnify",title:"Posts",link:"/posts"},{icon:"mdi-lock-open-outline",title:"Sign In",link:"/signin"},{icon:"mdi-login-variant",title:"Sign Up",link:"/signup"}];return this.user&&(t=[{icon:"mdi-chat-processing-outline",title:"Posts",link:"/posts"},{icon:"mdi-file-star",title:"Create Post",link:"/post/add"}]),t}})},u=l,d=(s("5c0b"),s("2877")),m=s("6544"),v=s.n(m),f=s("7496"),g=s("5bc1"),p=s("4ca6"),h=s("8336"),b=s("b0af"),_=s("a523"),j=s("ce7e"),w=s("132d"),P=s("8860"),k=s("da13"),y=s("1800"),x=s("5d23"),U=s("1baa"),V=s("34c3"),I=s("f774"),S=s("2db4"),C=s("2fa4"),$=s("8654"),O=s("71d9"),F=s("2a7f"),D=Object(d["a"])(u,o,i,!1,null,null,null),T=D.exports;v()(D,{VApp:f["a"],VAppBarNavIcon:g["a"],VBadge:p["a"],VBtn:h["a"],VCard:b["a"],VContainer:_["a"],VDivider:j["a"],VIcon:w["a"],VList:P["a"],VListItem:k["a"],VListItemAction:y["a"],VListItemContent:x["a"],VListItemGroup:U["a"],VListItemIcon:V["a"],VListItemTitle:x["c"],VNavigationDrawer:I["a"],VSnackbar:S["a"],VSpacer:C["a"],VTextField:$["a"],VToolbar:O["a"],VToolbarItems:F["a"],VToolbarTitle:F["b"]});var R=s("8c4f"),E=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-container",[s("v-row",[s("v-dialog",{attrs:{persistent:"",fullscreen:""},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},[s("v-container",{attrs:{"fill-height":""}},[s("v-layout",{attrs:{row:"","justify-center":"","align-center":""}},[s("v-progress-circular",{attrs:{indeterminate:"",size:70,width:7,color:"accent"}},[s("span",{staticStyle:{"font-size":"12px"}},[t._v("Loading")])])],1)],1)],1)],1),t.loading?t._e():s("v-row",{staticClass:"justify-center"},[s("v-btn",{staticClass:"secondary",attrs:{to:"/posts",large:"",dark:""}},[t._v(" Explore Posts ")])],1),s("v-row",[s("v-col",{attrs:{xs:"12"}},[!t.loading&&t.posts.length>0?s("v-carousel",t._b({attrs:{interval:"3000"}},"v-carousel",{cycle:!0},!1),t._l(t.posts,(function(e){return s("v-carousel-item",{key:e._id,attrs:{src:e.imageUrl},nativeOn:{click:function(s){return t.goToPost(e._id)}}},[s("h1",{attrs:{id:"carousel__title"}},[t._v(t._s(e.title))])])})),1):t._e()],1)],1)],1)},q=[],L={name:"home",created:function(){this.handleGetCarouselPosts()},methods:{handleGetCarouselPosts:function(){this.$store.dispatch("getPosts")},goToPost:function(t){this.$router.push("/posts/".concat(t))}},computed:Object(a["a"])({},Object(c["b"])(["loading","posts"]))},z=L,A=(s("9dd5"),s("5e66")),N=s("3e35"),B=s("62ad"),M=s("169a"),G=s("a722"),Q=s("490a"),J=s("0fd9"),Y=Object(d["a"])(z,E,q,!1,null,"19e7282c",null),H=Y.exports;v()(Y,{VBtn:h["a"],VCarousel:A["a"],VCarouselItem:N["a"],VCol:B["a"],VContainer:_["a"],VDialog:M["a"],VLayout:G["a"],VProgressCircular:Q["a"],VRow:J["a"]});var W=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-container",{staticClass:"text-sm-center mt-5 pt-5"},[s("v-row",{staticClass:"flex-wrap",attrs:{"no-gutters":""}},[s("v-col",{attrs:{cols:"12",md:"6","offset-sm":"3"}},[s("h1",{staticClass:"accent--text"},[t._v("Add Post")])])],1),s("v-row",{staticClass:"flex-wrap"},[s("v-col",{attrs:{cols:"12",sm:"6","offset-sm":"3"}},[s("v-form",{ref:"form",attrs:{"lazy-validation":""},on:{submit:function(e){return e.preventDefault(),t.handleAddPost(e)}},model:{value:t.isFormValid,callback:function(e){t.isFormValid=e},expression:"isFormValid"}},[s("v-row",[s("v-col",{attrs:{cols:"12"}},[s("v-text-field",{attrs:{label:"Post Title",type:"text",required:"",rules:t.titleRules},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}})],1)],1),s("v-row",[s("v-col",{attrs:{cols:"12"}},[s("v-text-field",{attrs:{label:"Image URL",type:"text",required:"",rules:t.imageRules},model:{value:t.imageUrl,callback:function(e){t.imageUrl=e},expression:"imageUrl"}})],1)],1),s("v-row",[s("v-col",{attrs:{cols:"12"}},[s("img",{attrs:{src:t.imageUrl,height:"300px"}})])],1),s("v-row",[s("v-col",{attrs:{xs:"12"}},[s("v-select",{attrs:{items:["Art","Education","Travel","Photography","Technology","Food","Nature"],multiple:"",label:"Categories",rules:t.categoriesRules},model:{value:t.categories,callback:function(e){t.categories=e},expression:"categories"}})],1)],1),s("v-row",[s("v-col",{attrs:{xs:"12"}},[s("v-textarea",{attrs:{rules:t.descRules,label:"Description",type:"text"},model:{value:t.description,callback:function(e){t.description=e},expression:"description"}})],1)],1),s("v-row",[s("v-col",{attrs:{xs:"12"}},[s("v-btn",{attrs:{color:"accent",type:"submit",loading:t.loading,disabled:!t.isFormValid||t.loading}},[t._v(" Submit ")])],1)],1)],1)],1)],1)],1)},K=[],X=(s("a4d3"),s("e01a"),{name:"AddPost",data:function(){return{isFormValid:!0,title:"",imageUrl:"",categories:[],description:"",titleRules:[function(t){return!!t||"Title is required"},function(t){return t.length<20||"Title must have less than 20 characters"}],imageRules:[function(t){return!!t||"Image is required"}],categoriesRules:[function(t){return t.length>=1||"At least one category is required"}],descRules:[function(t){return!!t||"Description is required"},function(t){return t.length<200||"Description should be less than 200 characters"}]}},computed:Object(a["a"])({},Object(c["b"])(["loading","user"])),methods:{handleAddPost:function(){this.$refs.form.validate()&&this.$store.dispatch("addPost",{title:this.title,imageUrl:this.imageUrl,categories:this.categories,description:this.description,creatorId:this.user._id}),this.$router.push("/")}}}),Z=X,tt=s("4bd4"),et=s("b974"),st=s("a844"),rt=Object(d["a"])(Z,W,K,!1,null,null,null),at=rt.exports;v()(rt,{VBtn:h["a"],VCol:B["a"],VContainer:_["a"],VForm:tt["a"],VRow:J["a"],VSelect:et["a"],VTextField:$["a"],VTextarea:st["a"]});var nt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("v-container",{attrs:{fluid:""}},[t.posts?s("v-row",{staticClass:"flex-wrap"},t._l(t.posts,(function(e){return s("v-col",{key:e._id,attrs:{xs:"12",sm:"6"}},[s("v-card",{attrs:{hover:""}},[s("v-img",{attrs:{src:e.imageUrl,height:"30vh",lazy:""},nativeOn:{click:function(s){return t.goToPost(e._id)}}}),s("v-card-actions",[s("v-card-title",{attrs:{primary:""}},[s("div",[s("div",{staticClass:"headline"},[t._v(t._s(e.title))]),s("span",{staticClass:"grey--text"},[t._v(t._s(e.likes)+" likes - "+t._s(e.messages.length)+" comments")])])]),s("v-spacer"),s("v-btn",{attrs:{icon:""},on:{click:function(e){t.showPostCreator=!t.showPostCreator}}},[s("v-icon",[t._v(t._s("mdi-arrow-"+(t.showPostCreator?"up":"down")+"-drop-circle-outline"))])],1)],1)],1),t.showPostCreator?s("v-slide-y-transition",[s("v-card-text",{staticClass:"grey lighten-4"},[s("v-list-item",[s("v-list-item-avatar",[s("img",{attrs:{src:e.createdBy.avatar,alt:"Cannot Find Image"}})]),s("v-list-item-content",[s("v-list-item-title",{staticClass:"primary--text"},[t._v(" "+t._s(e.createdBy.username)+" ")]),s("v-list-item-subtitle",{staticClass:"font-weight-thin"},[t._v(" Added "+t._s(t._f("dateFormat")(e.createdDate))+" ")])],1),s("v-list-item-action",[s("v-btn",{attrs:{icon:"",ripple:""}},[s("v-icon",{attrs:{color:"grey lighten-1"}},[t._v("mdi-information-outline")])],1)],1)],1)],1)],1):t._e()],1)})),1):t._e(),s("v-row",{staticClass:"justify-center"},[t.showMoreEnabled?s("v-btn",{attrs:{color:"info"},on:{click:t.showMorePosts}},[t._v(" Fetch More ")]):t._e()],1)],1)],1)},ot=[],it=s("2909"),ct=s("8785"),lt=s("9530"),ut=s.n(lt);function dt(){var t=Object(ct["a"])(["\n  mutation($username: String!, $email: String!, $password: String!) {\n    signupUser(username: $username, email: $email, password: $password) {\n      token\n    }\n  }\n"]);return dt=function(){return t},t}function mt(){var t=Object(ct["a"])(["\n  mutation($username: String!, $password: String!) {\n    signinUser(username: $username, password: $password) {\n      token\n    }\n  }\n"]);return mt=function(){return t},t}function vt(){var t=Object(ct["a"])(["\n  mutation($postId: ID!, $username: String!) {\n    unlikePost(postId: $postId, username: $username) {\n      likes\n      favorites {\n        _id\n        title\n        imageUrl\n      }\n    }\n  }\n"]);return vt=function(){return t},t}function ft(){var t=Object(ct["a"])(["\n  mutation($postId: ID!, $username: String!) {\n    likePost(postId: $postId, username: $username) {\n      likes\n      favorites {\n        _id\n        title\n        imageUrl\n      }\n    }\n  }\n"]);return ft=function(){return t},t}function gt(){var t=Object(ct["a"])(["\n  mutation($postId: ID!) {\n    deleteUserPost(postId: $postId) {\n      _id\n    }\n  }\n"]);return gt=function(){return t},t}function pt(){var t=Object(ct["a"])(["\n  mutation(\n    $postId: ID!\n    $userId: ID!\n    $title: String!\n    $imageUrl: String!\n    $categories: [String]!\n    $description: String!\n  ) {\n    updateUserPost(\n      postId: $postId\n      userId: $userId\n      title: $title\n      imageUrl: $imageUrl\n      categories: $categories\n      description: $description\n    ) {\n      _id\n      title\n      imageUrl\n      description\n      categories\n      createdDate\n      likes\n      createdBy {\n        _id\n        avatar\n      }\n    }\n  }\n"]);return pt=function(){return t},t}function ht(){var t=Object(ct["a"])(["\n  mutation($messageBody: String!, $userId: ID!, $postId: ID!) {\n    addPostMessage(\n      messageBody: $messageBody\n      userId: $userId\n      postId: $postId\n    ) {\n      _id\n      messageBody\n      messageDate\n      messageUser {\n        _id\n        username\n        avatar\n      }\n    }\n  }\n"]);return ht=function(){return t},t}function bt(){var t=Object(ct["a"])(["\n  mutation(\n    $title: String!\n    $imageUrl: String!\n    $categories: [String]!\n    $description: String!\n    $creatorId: ID!\n  ) {\n    addPost(\n      title: $title\n      imageUrl: $imageUrl\n      categories: $categories\n      description: $description\n      creatorId: $creatorId\n    ) {\n      _id\n      title\n      imageUrl\n      categories\n      description\n      createdDate\n      likes\n      createdBy {\n        _id\n      }\n    }\n  }\n"]);return bt=function(){return t},t}function _t(){var t=Object(ct["a"])(["\n  query($searchTerm: String) {\n    searchPosts(searchTerm: $searchTerm) {\n      _id\n      title\n      description\n      imageUrl\n      likes\n    }\n  }\n"]);return _t=function(){return t},t}function jt(){var t=Object(ct["a"])(["\n  query($userId: ID!) {\n    getUserPosts(userId: $userId) {\n      _id\n      title\n      imageUrl\n      description\n      categories\n      createdDate\n      likes\n    }\n  }\n"]);return jt=function(){return t},t}function wt(){var t=Object(ct["a"])(["\n  query {\n    getCurrentUser {\n      _id\n      username\n      email\n      password\n      avatar\n      joinDate\n      favorites {\n        _id\n        title\n        imageUrl\n      }\n    }\n  }\n"]);return wt=function(){return t},t}function Pt(){var t=Object(ct["a"])(["\n  query($pageNum: Int!, $pageSize: Int!) {\n    infiniteScrollPosts(pageNum: $pageNum, pageSize: $pageSize) {\n      hasMore\n      posts {\n        _id\n        title\n        imageUrl\n        categories\n        description\n        likes\n        createdDate\n        messages {\n          _id\n        }\n        createdBy {\n          _id\n          username\n          avatar\n        }\n      }\n    }\n  }\n"]);return Pt=function(){return t},t}function kt(){var t=Object(ct["a"])(["\n  query($postId: ID!) {\n    getPost(postId: $postId) {\n      _id\n      title\n      imageUrl\n      categories\n      description\n      createdDate\n      likes\n      messages {\n        _id\n        messageBody\n        messageDate\n        messageUser {\n          _id\n          username\n          avatar\n        }\n      }\n    }\n  }\n"]);return kt=function(){return t},t}function yt(){var t=Object(ct["a"])(["\n  query {\n    getPosts {\n      _id\n      title\n      imageUrl\n      createdBy {\n        avatar\n      }\n    }\n  }\n"]);return yt=function(){return t},t}var xt=ut()(yt()),Ut=ut()(kt()),Vt=ut()(Pt()),It=ut()(wt()),St=ut()(jt()),Ct=ut()(_t()),$t=ut()(bt()),Ot=ut()(ht()),Ft=ut()(pt()),Dt=ut()(gt()),Tt=ut()(ft()),Rt=ut()(vt()),Et=ut()(mt()),qt=ut()(dt()),Lt=s("c1df"),zt=s.n(Lt),At=2,Nt={name:"Posts",data:function(){return{pageNum:1,showPostCreator:!1}},filters:{dateFormat:function(t){if(!t)return"";var e=new Date(+t).toDateString();return e}},computed:{posts:function(){return console.log("infiniteScrollPosts: ",this.infiniteScrollPosts),!(!this.infiniteScrollPosts||!this.infiniteScrollPosts.posts)&&this.infiniteScrollPosts.posts},postsFromGetPost:function(){if(console.log("postsFromGetPosts: ",this.getPosts),this.getPosts)return this.getPosts},showMoreEnabled:function(){return this.infiniteScrollPosts&&this.infiniteScrollPosts.hasMore}},apollo:{infiniteScrollPosts:{query:Vt,variables:{pageNum:1,pageSize:At}}},methods:{goToPost:function(t){this.$router.push("/posts/".concat(t))},showMorePosts:function(){this.pageNum+=1,this.$apollo.queries.infiniteScrollPosts.fetchMore({variables:{pageNum:this.pageNum,pageSize:At},updateQuery:function(t,e){var s=e.fetchMoreResult,r=s.infiniteScrollPosts.posts,a=s.infiniteScrollPosts.hasMore;return{infiniteScrollPosts:{__typename:t.infiniteScrollPosts.__typename,posts:[].concat(Object(it["a"])(t.infiniteScrollPosts.posts),Object(it["a"])(r)),hasMore:a}}}})},formatCreatedDate:function(t){return zt()(new Date(t)).format("ll")}},mounted:function(){console.log("mounted Posts"),console.log(this.posts)}},Bt=Nt,Mt=s("99d9"),Gt=s("adda"),Qt=s("8270"),Jt=s("0789"),Yt=Object(d["a"])(Bt,nt,ot,!1,null,"201c05b2",null),Ht=Yt.exports;v()(Yt,{VBtn:h["a"],VCard:b["a"],VCardActions:Mt["a"],VCardText:Mt["b"],VCardTitle:Mt["c"],VCol:B["a"],VContainer:_["a"],VIcon:w["a"],VImg:Gt["a"],VListItem:k["a"],VListItemAction:y["a"],VListItemAvatar:Qt["a"],VListItemContent:x["a"],VListItemSubtitle:x["b"],VListItemTitle:x["c"],VRow:J["a"],VSlideYTransition:Jt["e"],VSpacer:C["a"]});var Wt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.getPost?s("v-container",{staticClass:"mt-3"},[s("h1",[t._v("Post Name: "+t._s(t.getPost.title)+" ")]),s("v-row",{staticClass:"flex-wrap"},[s("v-col",{attrs:{xs:"12"}},[s("v-card",{attrs:{hover:""}},[s("v-card-title",[s("h1",[t._v(t._s(t.getPost.title))]),t.user?s("v-btn",{attrs:{large:"",icon:""},on:{click:t.handleToggleLike}},[s("v-icon",{attrs:{large:"",color:t.checkIfPostLiked(t.getPost._id)?"red":"grey"}},[t._v("mdi-heart ")])],1):t._e(),s("h3",{staticClass:"ml-3 font-weight-thin"},[t._v(" "+t._s(t.getPost.likes)+" LIKES ")]),s("v-spacer"),s("v-icon",{attrs:{color:"info",large:""},on:{click:t.goToPreviousPage}},[t._v("mdi-arrow-left-bold")])],1),s("v-tooltip",{attrs:{right:""},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on,a=e.attrs;return[s("v-img",t._g(t._b({attrs:{src:t.getPost.imageUrl,id:"post__image"},on:{click:t.toggleImageDialog}},"v-img",a,!1),r))]}}],null,!1,463574313)},[s("span",[t._v("Click to enlarge image")])]),s("v-dialog",{model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[s("v-card",[s("v-img",{attrs:{src:t.getPost.imageUrl,id:"post__image","min-height":"80vh"}})],1)],1),s("v-card-text",[t._l(t.getPost.categories,(function(e,r){return s("span",{key:r,staticClass:"mr-2"},[s("v-chip",{staticClass:"mb-3",attrs:{color:"accent","text-color":"white"}},[t._v(" "+t._s(e)+" - "+t._s(r)+" ")])],1)})),s("h3",[t._v(t._s(t.getPost.description))])],2)],1)],1)],1),s("div",{staticClass:"mt-3"},[s("v-form",{ref:"form",attrs:{"lazy-validation":""},on:{submit:function(e){return e.preventDefault(),t.handleAddPostMessage(e)}},model:{value:t.isFormValid,callback:function(e){t.isFormValid=e},expression:"isFormValid"}},[t.user?s("v-row",{staticClass:"mb-3"},[s("v-col",{attrs:{xs:"12"}},[s("v-text-field",{attrs:{clearable:"","append-outer-icon":t.messageBody&&"mdi-send","prepend-icon":"mdi-email",label:"Add Message",type:"text",required:"",rules:t.messageRules},on:{"click:append-outer":t.handleAddPostMessage},model:{value:t.messageBody,callback:function(e){t.messageBody=e},expression:"messageBody"}})],1)],1):t._e()],1),s("v-row",[s("v-col",{attrs:{xs:"12"}},[s("v-list",{attrs:{subheader:"","two-line":""}},[s("v-subheader",[t._v(" Messages ("+t._s(t.getPost.messages.length)+") ")]),t._l(t.getPost.messages,(function(e){return[s("v-divider",{key:e._id,attrs:{inset:""}}),s("v-list-item",{key:e.title,attrs:{inset:""}},[s("v-list-item-avatar",[s("img",{attrs:{src:e.messageUser.avatar,alt:""}})]),s("v-list-item-content",[s("v-list-item-title",[t._v(" "+t._s(e.messageBody)+" ")]),s("v-list-item-subtitle",[t._v(" "+t._s(e.messageUser.username)+" "),s("span",{staticClass:"grey--text text--lighten-1 hidden-xs-only"},[t._v(t._s(t.getTimeFromNow(e.messageDate)))])])],1),s("v-list-item-action",{staticClass:"hidden-xs-only"},[s("v-icon",{attrs:{color:t.checkIfOwnMessage(e)?"accent":"grey"}},[t._v("mdi-chat")])],1)],1)]}))],2)],1)],1)],1)],1):t._e()},Kt=[],Xt={name:"Post",data:function(){return{postLiked:!1,dialog:!1,messageBody:"",isFormValid:!0,messageRules:[function(t){return!!t||"Message is required"},function(t){return!!t&&(t.length<50||"Message must be less than 50 characters")}]}},props:["postId"],apollo:{getPost:{query:Ut,variables:function(){return{postId:this.postId}}}},computed:Object(a["a"])({},Object(c["b"])(["user","userFavorites"])),methods:{goToPreviousPage:function(){this.$router.go(-1)},toggleImageDialog:function(){window.innerWidth>500&&(this.dialog=!this.dialog)},handleAddPostMessage:function(){var t=this;if(console.log("validation: ",this.$refs.form),this.$refs.form.validate()){var e={messageBody:this.messageBody,userId:this.user._id,postId:this.postId};this.$apollo.mutate({mutation:Ot,variables:e,update:function(e,s){var r=s.data.addPostMessage,a=e.readQuery({query:Ut,variables:{postId:t.postId}});console.log('This is data from cached "GET_POST',a),console.log("newly added data to be added to the cache",r),a.getPost.messages.unshift(r),e.writeQuery({query:Ut,variables:{postId:t.postId},data:a})}}).then((function(e){var s=e.data;t.$refs.form.reset(),console.log("data.addPostMessage: ",s.addPostMessage)}))}},checkIfOwnMessage:function(t){return this.user&&this.user._id===t.messageUser._id},checkIfPostLiked:function(t){return this.userFavorites&&this.userFavorites.some((function(e){return e._id===t}))?(this.postLiked=!0,!0):(this.postLiked=!1,!1)},handleToggleLike:function(){this.postLiked?this.handleUnlikePost():this.handleLikePost()},handleLikePost:function(){var t=this,e={postId:this.postId,username:this.user.username};this.$apollo.mutate({mutation:Tt,variables:e,update:function(e,s){s.data.likePost;var r=e.readQuery({query:Ut,variables:{postId:t.postId}});r.getPost.likes+=1,e.writeQuery({query:Ut,variables:{postId:t.postId},data:r})}}).then((function(e){var s=e.data;console.log("user: ",t.user),console.log("like post",s.likePost);var r=Object(a["a"])(Object(a["a"])({},t.user),{},{favorites:s.likePost.favorites});t.$store.commit("setUser",r)})).catch((function(t){return console.log(t)}))},handleUnlikePost:function(){var t=this,e={postId:this.postId,username:this.user.username};this.$apollo.mutate({mutation:Rt,variables:e,update:function(e,s){s.data.likePost;var r=e.readQuery({query:Ut,variables:{postId:t.postId}});r.getPost.likes-=1,e.writeQuery({query:Ut,variables:{postId:t.postId},data:r})}}).then((function(e){var s=e.data;console.log("user: ",t.user),console.log("like post",s.likePost);var r=Object(a["a"])(Object(a["a"])({},t.user),{},{favorites:s.unlikePost.favorites});t.$store.commit("setUser",r)})).catch((function(t){return console.log(t)}))},getTimeFromNow:function(t){return console.log("getTimeFromNow: ",new Date(+t)),zt()(new Date(+t)).fromNow()}},mounted:function(){console.log(this.getPost)},filters:{dateFormat:function(t){if(!t)return"";var e=new Date(+t).toDateString();return e}}},Zt=Xt,te=(s("4889"),s("cc20")),ee=s("e0c7"),se=s("3a2f"),re=Object(d["a"])(Zt,Wt,Kt,!1,null,"79fd4924",null),ae=re.exports;v()(re,{VBtn:h["a"],VCard:b["a"],VCardText:Mt["b"],VCardTitle:Mt["c"],VChip:te["a"],VCol:B["a"],VContainer:_["a"],VDialog:M["a"],VDivider:j["a"],VForm:tt["a"],VIcon:w["a"],VImg:Gt["a"],VList:P["a"],VListItem:k["a"],VListItemAction:y["a"],VListItemAvatar:Qt["a"],VListItemContent:x["a"],VListItemSubtitle:x["b"],VListItemTitle:x["c"],VRow:J["a"],VSpacer:C["a"],VSubheader:ee["a"],VTextField:$["a"],VTooltip:se["a"]});var ne=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-container",{staticClass:"text-sm-center"},[s("v-row",[s("v-col",{attrs:{sm:"6","offset-sm":"3"}},[s("v-card",{staticClass:"white--text",attrs:{color:"secondary"}},[s("v-row",[s("v-col",{attrs:{xs:"5"}},[s("v-img",{attrs:{height:"125px",contain:"",src:t.user.avatar}})],1),s("v-col",{attrs:{xs:"7"}},[s("v-card-title",{staticClass:"text--primary"},[s("div",[s("div",{staticClass:"text-h4"},[t._v(t._s(t.user.username))]),s("div",[t._v("Joined "+t._s(t.formatJoinDate(t.user.joinDate)))]),s("div",{staticClass:"hidden-xs-only font-weight-thin"},[t._v(t._s(t.user.favorites.length)+" Favorites")]),s("div",{staticClass:"hidden-xs-only font-weight-thin"},[t._v(t._s(t.userPosts.length)+" Posts Added")])])])],1)],1)],1)],1)],1),t.userFavorites.length?s("v-row",[s("v-col",{attrs:{xs:"12"}},[s("h2",{staticClass:"font-weight-light"},[t._v(" Favorited "),s("span",{staticClass:"font-weight-regular"},[t._v(t._s(t.userFavorites.length))])])]),s("v-container",[s("v-row",{staticClass:"flex-wrap"},t._l(t.userFavorites,(function(e){return s("v-col",{key:e._id,attrs:{xs:"12",sm:"6"}},[s("v-card",{staticClass:"mt-3 ml-1 mr-2",attrs:{hover:""}},[s("v-img",{attrs:{height:"30vh",src:e.imageUrl},on:{click:function(s){return t.goToPost(e._id)}}}),s("v-card-text",[t._v(" "+t._s(e.title)+" ")])],1)],1)})),1)],1)],1):s("v-container",[s("v-row",{staticClass:"flex-wrap"},[s("v-col",{attrs:{xs:"12"}},[s("h1",[t._v("You have no favorites currently")])])],1)],1),t.userPosts.length?s("v-container",{staticClass:"mt-3"},[s("v-col",{attrs:{xs:"12"}},[s("h2",{staticClass:"font-weight-light"},[t._v("Your Posts "),s("span",{staticClass:"font-weight-regular"},[t._v("("+t._s(t.userPosts.length)+") ")])])]),s("v-row",{staticClass:"flex-wrap"},t._l(t.userPosts,(function(e){return s("v-col",{key:e._id,attrs:{xs:"12",sm:"6"}},[s("v-card",{staticClass:"mt-3 ml-1 mr-2",attrs:{hover:""}},[s("v-btn",{staticClass:"mx-2 my-2",attrs:{color:"info",floating:"",fab:"",small:"",dark:""},on:{click:function(s){return t.loadPost(e)}}},[s("v-icon",[t._v(" mdi-lead-pencil ")])],1),s("v-btn",{staticClass:"mx-2 my-2",attrs:{color:"error",floating:"",fab:"",small:"",dark:""},on:{click:function(s){return t.handleDeleteUserPost(e)}}},[s("v-icon",[t._v(" mdi-delete ")])],1),s("v-img",{attrs:{height:"30vh",src:e.imageUrl},on:{click:function(s){return t.goToPost(e._id)}}}),s("v-card-text",[t._v(" "+t._s(e.title)+" ")])],1)],1)})),1)],1):s("v-container",[s("v-row",{staticClass:"flex-wrap"},[s("v-col",{attrs:{xs:"12"}},[s("h2",[t._v("You have no posts currently. Go and add some!")])])],1)],1),s("v-row",{attrs:{justify:"center"}},[s("v-dialog",{attrs:{"max-width":"800px",persistent:""},model:{value:t.editPostDialog,callback:function(e){t.editPostDialog=e},expression:"editPostDialog"}},[s("v-card",[s("v-card-title",{staticClass:"headline grey lighten-2"},[t._v(" Update Post ")]),s("v-form",{ref:"form",attrs:{"lazy-validation":""},on:{submit:function(e){return e.preventDefault(),t.handleUpdateUserPost(e)}},model:{value:t.isFormValid,callback:function(e){t.isFormValid=e},expression:"isFormValid"}},[s("v-container",[s("v-row",{attrs:{justify:"center"}},[s("v-col",{attrs:{cols:"11"}},[s("v-text-field",{attrs:{label:"Post Title",type:"text",required:"",rules:t.titleRules},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}})],1)],1),s("v-row",{attrs:{justify:"center"}},[s("v-col",{attrs:{cols:"11"}},[s("v-text-field",{attrs:{label:"Image URL",type:"text",required:"",rules:t.imageRules},model:{value:t.imageUrl,callback:function(e){t.imageUrl=e},expression:"imageUrl"}})],1)],1),s("v-row",{attrs:{justify:"center"}},[s("v-col",{attrs:{cols:"11"}},[s("img",{attrs:{src:t.imageUrl,height:"300px"}})])],1),s("v-row",{attrs:{justify:"center"}},[s("v-col",{attrs:{cols:"11"}},[s("v-select",{attrs:{items:["Art","Education","Travel","Photography","Technology","Food","Nature"],multiple:"",label:"Categories",rules:t.categoriesRules},model:{value:t.categories,callback:function(e){t.categories=e},expression:"categories"}})],1)],1),s("v-row",{attrs:{justify:"center"}},[s("v-col",{attrs:{cols:"11"}},[s("v-textarea",{attrs:{rules:t.descRules,label:"Description",type:"text"},model:{value:t.description,callback:function(e){t.description=e},expression:"description"}})],1)],1),s("v-divider"),s("v-card-actions",[s("v-spacer"),s("v-btn",{staticClass:"succcess--text",attrs:{disabled:!t.isFormValid,type:"submit",text:""}},[t._v("Update")]),t._v(" "),s("v-btn",{staticClass:"error--text",attrs:{text:""},on:{click:function(e){t.editPostDialog=!1}}},[t._v("Cancel")])],1)],1)],1)],1)],1)],1)],1)},oe=[],ie={name:"Profile",data:function(){return{editPostDialog:!1,isFormValid:!0,title:"",imageUrl:"",categories:[],description:"",titleRules:[function(t){return!!t||"Title is required"},function(t){return t.length<20||"Title must have less than 20 characters"}],imageRules:[function(t){return!!t||"Image is required"}],categoriesRules:[function(t){return t.length>=1||"At least one category is required"}],descRules:[function(t){return!!t||"Description is required"},function(t){return t.length<200||"Description should be less than 200 characters"}]}},computed:Object(a["a"])({},Object(c["b"])(["user","userFavorites","userPosts"])),methods:{handleGetUserPosts:function(){this.$store.dispatch("getUserPosts",{userId:this.user._id})},handleUpdateUserPost:function(){console.log("handleUpdateUserPost->user id: ",this.user._id),this.$refs.form.validate()&&(this.$store.dispatch("updateUserPost",{postId:this.postId,userId:this.user._id,title:this.title,imageUrl:this.imageUrl,categories:this.categories,description:this.description}),this.editPostDialog=!1)},handleDeleteUserPost:function(t){this.loadPost(t,!1);var e=window.confirm("Ar you sure you want delete this Post?");e&&this.$store.dispatch("deleteUserPost",{postId:this.postId})},loadPost:function(t){var e=t._id,s=t.title,r=t.imageUrl,a=t.categories,n=t.description,o=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.editPostDialog=o,this.postId=e,this.title=s,this.imageUrl=r,this.categories=a,this.description=n},formatJoinDate:function(t){return zt()(new Date(+t)).format("ll")},goToPost:function(t){this.$router.push("/posts/".concat(t))}},created:function(){this.handleGetUserPosts()},filters:{dateFormat:function(t){if(!t)return"";var e=new Date(+t).toDateString();return e}}},ce=ie,le=Object(d["a"])(ce,ne,oe,!1,null,"519fb2aa",null),ue=le.exports;v()(le,{VBtn:h["a"],VCard:b["a"],VCardActions:Mt["a"],VCardText:Mt["b"],VCardTitle:Mt["c"],VCol:B["a"],VContainer:_["a"],VDialog:M["a"],VDivider:j["a"],VForm:tt["a"],VIcon:w["a"],VImg:Gt["a"],VRow:J["a"],VSelect:et["a"],VSpacer:C["a"],VTextField:$["a"],VTextarea:st["a"]});var de=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-container",{staticClass:"text-sm-center mt-5 pt-5",staticStyle:{"font-family":"Open Sans"}},[s("v-row",[s("v-col",{attrs:{xs:"12",sm:"6","offset-sm":"3"}},[s("h1",[t._v("Welcome Back!")])])],1),t.error?s("v-row",[s("v-col",{attrs:{transition:"scale-transition"}},[s("form-alert",{attrs:{message:t.error.message}})],1)],1):t._e(),s("v-row",{staticClass:"flex-wrap"},[s("v-col",{attrs:{xs:"12",sm:"6","offset-sm":"3"}},[s("v-card",{staticClass:"px-2",attrs:{color:"secondary",dark:""}},[s("v-container",[s("v-form",{ref:"form",attrs:{"lazy-validation":""},on:{submit:function(e){return e.preventDefault(),t.handleSignInUser(e)}},model:{value:t.isFormValid,callback:function(e){t.isFormValid=e},expression:"isFormValid"}},[s("v-row",[s("v-col",{attrs:{xs:"12"}},[s("v-text-field",{attrs:{"prepend-icon":"mdi-face",label:"Username",type:"text",required:"",rules:t.usernameRules},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}})],1)],1),s("v-row",{staticClass:"mb-n3"},[s("v-col",{attrs:{xs:"12"}},[s("v-text-field",{attrs:{"prepend-icon":"mdi-key",label:"Password",type:"password",rules:t.passwordRules,required:""},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1)],1),s("v-row",[s("v-col",{attrs:{xs:"12"}},[s("v-btn",{attrs:{color:"accent",type:"submit",loading:t.loading,disabled:!t.isFormValid}},[t._v(" Signin ")]),s("h4",{staticClass:"my-3"},[t._v(" Don't have an account "),s("router-link",{attrs:{to:"/signup"}},[t._v("Sign Up")])],1)],1)],1)],1)],1)],1)],1)],1)],1)},me=[],ve={name:"SignIn",data:function(){return{isFormValid:!0,username:"",password:"",usernameRules:[function(t){return!!t||"Username is required"},function(t){return t.length<10||"Username must be less than 10 characters"}],passwordRules:[function(t){return!!t||"Password is required"},function(t){return t.length>=7||"Password should be more than 7 characters"}]}},computed:Object(a["a"])({},Object(c["b"])(["user","error","loading"])),watch:{user:function(t){t&&this.$router.push("/")}},methods:{handleSignInUser:function(){this.$refs.form.validate()&&this.$store.dispatch("signinUser",{username:this.username,password:this.password})}}},fe=ve,ge=(s("441d"),Object(d["a"])(fe,de,me,!1,null,null,null)),pe=ge.exports;v()(ge,{VBtn:h["a"],VCard:b["a"],VCol:B["a"],VContainer:_["a"],VForm:tt["a"],VRow:J["a"],VTextField:$["a"]});var he=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-container",{staticClass:"text-sm-center mt-n5 pt-5 px-5",staticStyle:{"font-family":"Open Sans"}},[s("v-row",[s("v-col",{attrs:{xs:"12",sm:"6","offset-sm":"3"}},[s("h1",[t._v("Get Started Here")])])],1),t.error?s("v-row",[s("v-col",{attrs:{transition:"scale-transition"}},[s("form-alert",{attrs:{message:t.error.message}})],1)],1):t._e(),s("v-row",[s("v-col",{attrs:{xs:"12",sm:"6","offset-sm":"3"}},[s("v-card",{attrs:{color:"secondary",dark:""}},[s("v-container",[s("v-form",{ref:"form",staticClass:"px-2",attrs:{"lazy-validation":""},on:{submit:function(e){return e.preventDefault(),t.handleSignUpUser(e)}},model:{value:t.isFormValid,callback:function(e){t.isFormValid=e},expression:"isFormValid"}},[s("v-row",{attrs:{"no-gutters":""}},[s("v-col",{attrs:{xs:"12"}},[s("v-text-field",{attrs:{"prepend-icon":"mdi-face",label:"Username",type:"text",required:"",rules:t.usernameRules},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}})],1)],1),s("v-row",[s("v-col",{attrs:{xs:"12"}},[s("v-text-field",{attrs:{"prepend-icon":"mdi-email",label:"Email",type:"email",required:"",rules:t.emailRules},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}})],1)],1),s("v-row",[s("v-col",{attrs:{xs:"12"}},[s("v-text-field",{attrs:{"prepend-icon":"mdi-key",label:"Password",type:"password",rules:t.passwordRules,required:""},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1)],1),s("v-row",[s("v-col",{attrs:{xs:"12"}},[s("v-text-field",{attrs:{"prepend-icon":"mdi-gavel",label:"Confirm Password",type:"password",rules:t.passwordRules,required:""},model:{value:t.passwordConfirmation,callback:function(e){t.passwordConfirmation=e},expression:"passwordConfirmation"}})],1)],1),s("v-row",[s("v-col",{attrs:{xs:"12"}},[s("v-btn",{staticClass:"mb-5",attrs:{color:"accent",type:"submit",loading:t.loading,disabled:!t.isFormValid||t.loading}},[t._v(" SignUp ")]),s("h3",[t._v(" Already Have an Account? "),s("router-link",{attrs:{to:"/Sign In"}},[t._v("Sign In")])],1)],1)],1)],1)],1)],1)],1)],1)],1)},be=[],_e={name:"SignUp",data:function(){var t=this;return{isFormValid:!0,username:"",email:"",password:"",passwordConfirmation:"",usernameRules:[function(t){return!!t||"Username is required"},function(t){return t.length<10||"Username cannot be more than 10"}],emailRules:[function(t){return!!t||"Email is required"},function(t){return/.@+./.test(t)||"Email must be valid"}],passwordRules:[function(t){return!!t||"Password is required"},function(t){return t.length>=4||"Password must be at least 4 characters"},function(e){return e===t.password||"Password must match"}]}},computed:Object(a["a"])({},Object(c["b"])(["error","loading","user"])),methods:{handleSignUpUser:function(){this.$refs.form.validate()&&this.$store.dispatch("signUpUser",{username:this.username,email:this.email,password:this.password})}},watch:{user:function(t){t&&this.$router.push("/")}}},je=_e,we=Object(d["a"])(je,he,be,!1,null,"18de1df4",null),Pe=we.exports;v()(we,{VBtn:h["a"],VCard:b["a"],VCol:B["a"],VContainer:_["a"],VForm:tt["a"],VRow:J["a"],VTextField:$["a"]});var ke=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div")},ye=[],xe={name:"TestPage",data:function(){return{username:"",password:""}},methods:{handleSignInUser:function(){this.$store.dispatch("signinUser",{username:this.username,password:this.password})}}},Ue=xe,Ve=Object(d["a"])(Ue,ke,ye,!1,null,"771562ea",null),Ie=Ve.exports,Se=(s("c740"),s("96cf"),s("1da1")),Ce=s("0e44");n["a"].use(c["a"]);var $e=new c["a"].Store({plugins:[Object(Ce["a"])({storage:window.sessionStorage,path:[]})],state:{posts:[],user:null,loading:!1,error:null,authError:null,searchResults:[],userPosts:[]},mutations:{setPosts:function(t,e){t.posts=e},setUser:function(t,e){t.user=e},setUserPosts:function(t,e){t.userPosts=e},setLoading:function(t,e){t.loading=e},clearUser:function(t){return t.user=null},setError:function(t,e){t.error=e},clearError:function(t){t.error=null},setAuthError:function(t,e){t.authError=e},setSearchResults:function(t,e){null!==e&&(t.searchResults=e)},clearSearchResults:function(t){return t.searchResults=[]}},actions:{getPosts:function(t){return Object(Se["a"])(regeneratorRuntime.mark((function e(){var s,r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s=t.commit,s("setLoading",!0),e.prev=2,e.next=5,rs.query({query:xt});case 5:r=e.sent,a=r.data.getPosts,console.log("data of getPosts",a),s("setPosts",a),s("setLoading",!1),e.next=16;break;case 12:e.prev=12,e.t0=e["catch"](2),s("setLoading",!1),console.log(e.t0);case 16:case"end":return e.stop()}}),e,null,[[2,12]])})))()},getUserPosts:function(t,e){var s=t.commit;rs.query({query:St,variables:e}).then((function(t){var e=t.data;console.log("get user's own posts: ",e.getUserPosts),s("setUserPosts",e.getUserPosts)})).catch((function(t){console.error(t)}))},searchPosts:function(t,e){var s=t.commit;console.log("searchPost action payload: ",e),rs.query({query:Ct,variables:e}).then((function(t){var e=t.data;console.log("search data result: ",e.searchPosts),s("setSearchResults",e.searchPosts)})).catch((function(t){return console.error(t)}))},addPost:function(t,e){return Object(Se["a"])(regeneratorRuntime.mark((function s(){var r,n;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return t.commit,s.prev=1,s.next=4,rs.mutate({mutation:$t,variables:e,update:function(t,e){var s=e.data.addPost;console.log("update addPost: ",s);var r=t.readQuery({query:xt});console.log("getting the old Post array through cache.readQuery"),console.log(r),r.getPosts.unshift(s),console.log("New shifted data.getPosts",r.getPosts),t.writeQuery({query:xt,data:r})},optimisticResponse:{__typename:"Mutation",addPost:Object(a["a"])({__typename:"Post",_id:-1},e)},refetchQueries:[{query:Vt,variables:{pageNum:1,pageSize:2}}]});case 4:r=s.sent,n=r.data,console.log("data: ",n),s.next=11;break;case 9:s.prev=9,s.t0=s["catch"](1);case 11:case"end":return s.stop()}}),s,null,[[1,9]])})))()},updateUserPost:function(t,e){var s=t.state,r=t.commit;rs.mutate({mutation:Ft,variables:e}).then((function(t){var e=t.data;console.log("user posts",s.userPosts),console.log("Update User Post: ",e.updateUserPost);var a=s.userPosts.findIndex((function(t){return t._id===e.updateUserPost._id})),n=[].concat(Object(it["a"])(s.userPosts.slice(0,a)),[e.updateUserPost],Object(it["a"])(s.userPosts.slice(a+1)));r("setUserPosts",n)})).catch((function(t){console.error(t)}))},deleteUserPost:function(t,e){var s=t.state,r=t.commit;rs.mutate({mutation:Dt,variables:e}).then((function(t){var e=t.data;console.log("user posts",s.userPosts),console.log("Update User Post: ",e.deleteUserPost);var a=s.userPosts.findIndex((function(t){return t._id===e.deleteUserPost._id})),n=[].concat(Object(it["a"])(s.userPosts.slice(0,a)),Object(it["a"])(s.userPosts.slice(a+1)));r("setUserPosts",n)})).catch((function(t){console.error(t)}))},signinUser:function(t,e){return Object(Se["a"])(regeneratorRuntime.mark((function s(){var r,a,n,o;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return r=t.dispatch,a=t.commit,a("clearError"),a("setLoading",!0),localStorage.removeItem("token"),s.prev=4,s.next=7,rs.mutate({mutation:Et,variables:e});case 7:return n=s.sent,console.log(n.data.signinUser),o=n.data.signinUser,console.log(o.token),localStorage.setItem("token",o.token),s.next=14,r("getCurrentUser");case 14:a("setLoading",!1),Te.go(),s.next=23;break;case 18:s.prev=18,s.t0=s["catch"](4),a("setLoading",!1),a("setError",s.t0),console.error("Error Signing In: ",s.t0.message);case 23:case"end":return s.stop()}}),s,null,[[4,18]])})))()},signUpUser:function(t,e){return Object(Se["a"])(regeneratorRuntime.mark((function s(){var r,a,n,o;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return r=t.dispatch,a=t.commit,a("clearError"),a("setLoading",!0),s.prev=3,s.next=6,rs.mutate({mutation:qt,variables:e});case 6:return n=s.sent,console.log(n.data.signupUser),o=n.data.signupUser,console.log(o.token),localStorage.setItem("token",o.token),s.next=13,r("getCurrentUser");case 13:a("setLoading",!1),Te.go(),s.next=22;break;case 17:s.prev=17,s.t0=s["catch"](3),a("setLoading",!1),a("setError",s.t0),console.error("Error Signing Up: ",s.t0.message);case 22:case"end":return s.stop()}}),s,null,[[3,17]])})))()},getCurrentUser:function(t){return Object(Se["a"])(regeneratorRuntime.mark((function e(){var s,r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s=t.commit,console.log("store-> getcurrentUser triggered"),s("setLoading",!0),e.prev=3,e.next=6,rs.query({query:It});case 6:r=e.sent,a=r.data,s("setLoading",!1),a&&console.log("store: data.getCurrentUser: ",a.getCurrentUser),s("setUser",a.getCurrentUser),e.next=16;break;case 13:e.prev=13,e.t0=e["catch"](3),console.error(e.t0);case 16:case"end":return e.stop()}}),e,null,[[3,13]])})))()},signOutUser:function(t){return Object(Se["a"])(regeneratorRuntime.mark((function e(){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s=t.commit,s("clearUser"),sessionStorage.clear(),localStorage.removeItem("token",""),console.dir(rs),e.next=7,rs.resetStore();case 7:Te.push("/");case 8:case"end":return e.stop()}}),e)})))()}},getters:{posts:function(t){return t.posts},userPosts:function(t){return t.userPosts},loading:function(t){return t.loading},user:function(t){return t.user},userFavorites:function(t){return t.user&&t.user.favorites},error:function(t){return t.error},authError:function(t){return t.authError},searchResults:function(t){return t.searchResults}},modules:{}}),Oe=function(t,e,s){console.log("Executing Auth Guard"),$e.getters.user?s():(console.log("redirecting"),s({path:"/signin"}))};n["a"].use(R["a"]);var Fe=[{path:"/",name:"Home",component:H},{path:"/posts",name:"Posts",component:Ht},{path:"/posts/:postId",name:"Post",component:ae,props:!0},{path:"/post/add",name:"AddPost",component:at,beforeEnter:Oe,beforeRouteEnter:function(t,e,s){console.log("before Route Enter triggered")}},{path:"/profile",name:"Profile",component:ue,beforeEnter:Oe},{path:"/signin",name:"SignIn",component:pe},{path:"/signup",name:"SignUp",component:Pe},{path:"/test",name:"TestPage",component:Ie}],De=new R["a"]({mode:"history",base:"/",routes:Fe}),Te=De,Re=s("f309"),Ee=s("c0a4"),qe=s.n(Ee);s("bf40"),s("5363");n["a"].use(Re["a"]);var Le=new Re["a"]({theme:{themes:{light:{primary:"#03a9f4",secondary:"#81D4FA",accent:qe.a.red.accent1,error:"#f44336",warning:"#ff5722",info:"#2196f3",success:"#4caf50"}}},icons:{iconfont:"mdi"}}),ze=(s("d5e8"),s("74ca")),Ae=s("478e"),Ne=s("2bf2"),Be=s("c2c3"),Me=s("e13b"),Ge=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-alert",{attrs:{type:"error",color:"error",icon:"warning",value:!0,dismissible:"",transition:"scale-transition"}},[s("h3",[t._v(" "+t._s(t.message)+" ")])])},Qe=[],Je={props:["message"]},Ye=Je,He=s("0798"),We=Object(d["a"])(Ye,Ge,Qe,!1,null,"49fa8c80",null),Ke=We.exports;v()(We,{VAlert:He["a"]});var Xe=s("522d");n["a"].component("form-alert",Ke),n["a"].use(Xe["a"]);var Ze=Object(Ae["a"])({uri:"https://ome-pic-share.herokuapp.com/",credentials:"same-origin"}),ts=Object(Be["a"])((function(t,e){var s=e.headers,r=localStorage.getItem("token");return{headers:Object(a["a"])(Object(a["a"])({},s),{},{authorization:r?"".concat(r):""})}})),es=Object(Me["a"])((function(t){var e=t.graphQLErrors,s=t.networkError;if(s&&console.log("[networkError]",s),e){var a,n=Object(r["a"])(e);try{for(n.s();!(a=n.n()).done;){var o=a.value;console.dir(o),"AuthenticationError"===o.name&&($e.commit("setAuthError",o),$e.dispatch("signOutUser"))}}catch(o){n.e(o)}finally{n.f()}}})),ss=new Ne["a"],rs=new ze["a"]({link:es.concat(ts).concat(Ze),cache:ss}),as=new Xe["a"]({defaultClient:rs});n["a"].config.productionTip=!1,new n["a"]({provide:{$apolloProvider:as},store:$e,router:Te,vuetify:Le,render:function(t){return t(T)},created:function(){}}).$mount("#app")},5923:function(t,e,s){},"5c0b":function(t,e,s){"use strict";var r=s("9c0c"),a=s.n(r);a.a},"5f52":function(t,e,s){},"8b94":function(t,e,s){},"9c0c":function(t,e,s){},"9dd5":function(t,e,s){"use strict";var r=s("5923"),a=s.n(r);a.a}});
//# sourceMappingURL=app.ffbb0a20.js.map